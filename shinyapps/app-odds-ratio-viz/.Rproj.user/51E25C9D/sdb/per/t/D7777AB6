{
    "collab_server" : "",
    "contents" : "\n################################ UI ########################################\n\nlibrary(shiny)\nlibrary(plotly)\n\n\n# Define UI for app that draws a histogram ----\nui = fluidPage(\n  \n  # App title ----\n  titlePanel(\"The odds ratio viz-ualiser!\"),\n  \n  # Sidebar layout with input and output definitions ----\n  sidebarLayout(\n    \n    # Sidebar panel for inputs ----\n    sidebarPanel(\n      \n      # Input: Slider for the number of bins ----\n      sliderInput(\"Prob1\",\n                  \"Baseline probability:\",\n                  min = 0,\n                  max = 1,\n                  value = 0.5),\n    #\n    sliderInput(\"OddsRatio\",\n                \"Odds ratio:\",\n                min = 1,\n                max = 5,\n                value = 1,\n                step = 0.1)\n    ),\n  \n    # Main panel for displaying outputs ----\n    mainPanel(\n      \n      # Output: Histogram ----\n      plotOutput(outputId = \"distPlot\")\n      \n    )\n  )\n)\n\n\nserver = function(input, output) {\n\n    \n  output$distPlot = renderPlot({\n    \n    # Prep data\n    Prob2 = (input$Prob1 * input$OddsRatio) / (1 - input$Prob1 + input$Prob1 * input$OddsRatio)\n    Prob2 = round(Prob2, 2)\n    RiskDiff  = round(Prob2 - input$Prob1, 2)\n    RiskRatio = Prob2 / input$Prob1\n    RiskRatio = round(RiskRatio, 1)\n    \n    #\n    RiskText = paste0(\"RD = \", RiskDiff, \";   RR = \", RiskRatio, \";   OR = \", input$OddsRatio)\n    \n    ## render data as plot\n    ggplot() +\n      geom_col(aes(x=1:2, y=c(input$Prob1, Prob2))) +\n      geom_text(aes(x=1:2, y=c(input$Prob1, Prob2), label=c(input$Prob1, Prob2)), position=position_dodge(width=0.9), vjust=-0.25) + \n      geom_text(aes(x=1.5, y=-0.1, label=RiskText)) +\n      coord_cartesian(xlim=c(0,3), ylim=c(-0.2,1.2)) + \n      labs(title = \"Unpack and understand your odds ratio here!\", \n           x=\"\", y=\"Probability\")\n    \n    ##plot(1:2, c(input$Prob1, Prob2), ylim=c(0,1))\n    \n  })\n  \n}\n\n\nshinyApp(ui = ui, server = server)\n\n\n\n\n",
    "created" : 1539041447145.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "2714933624",
    "id" : "D7777AB6",
    "lastKnownWriteTime" : 1538968290,
    "last_content_update" : 1538968290,
    "path" : "C:/JamiesFiles/Analytics/RShinyTestingServer/shinyapps/app-odds-ratio-viz/app.R",
    "project_path" : "app.R",
    "properties" : {
    },
    "relative_order" : 1,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}